/*! uiMarker - v1.1.4 - 2015-03-13 */
var uiMarker=function(){var a=function(a){function b(a,b){this.$el=null,this._ID=a,this._selectorsMapping=null,this._globalSelectors=null,this._styles={},this._options={extension:{},reference:"body"},this._init(b)}return b.prototype={initOptions:function(){},initStyles:function(){},initEvents:function(){},createSubElements:function(){},afterInit:function(){},appendTo:function(b){b&&(b instanceof String&&(b=a(b)),this.$el.appendTo(b))},show:function(){this.$el.show()},hide:function(){this.$el.hide()},setOptions:function(){for(var a in arguments)arguments.hasOwnProperty(a)&&this._extendObject(this._options,arguments[a])},setStyles:function(){for(var a in arguments)arguments.hasOwnProperty(a)&&this._extendObject(this._styles,arguments[a])},_init:function(a){this.initOptions(a),this.initStyles(this._options.extension),this._createElement(),this._createStyleTag(),this.initEvents(),this.afterInit()},_createElement:function(){var b=a("#"+this._ID);b.length>0&&(b.remove(),console.log("Container ID already in use and thus has been removed.")),this.$el=a("<div/>").attr("id",this._ID),this.createSubElements()},_createStyleTag:function(){var b=this._ID+"-style";a("#"+b).remove();var c,d,e,f,g,h=a("<style/>").attr("id",b);for(e in this._styles)this._styles.hasOwnProperty(e)&&(f=this._styles[e],d=this._selectorsMapping&&this._selectorsMapping[e],g=this._globalSelectors&&this._globalSelectors[e],c=g?"":"#"+this._ID,"main"!=e&&(c+=" "+(d||"."+e)),h.append(c+" {"+this._styleObjectToString(f)+"}"));a("head").append(h)},_extendObject:function(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]&&a[c]instanceof Object&&!(a[c]instanceof Array)?this._extendObject(a[c],b[c]):a[c]=b[c])},_styleObjectToString:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+":"+a[c]+";");return b.join("")}},b}(jQuery),b=function(a,b){function c(a,c){b.call(this,a,c)}function d(a){var b,c=this._options.checkUseMarker?this._options.checkUseMarker():!0,d=this._options.checkUseFont?this._options.checkUseFont():!0;return c||d?(b=n(a),c&&e.call(this,a,b),d&&f.call(this,a,b),!0):!1}function e(b,c){var d=this._options.markerData;if(a(b).data(d)===!0)return!0;c||(c=n(b));var e=a('<div class="'+this._options.markerClass+'"/>').width(c.width).height(c.height).offset(c.offset).click(function(b){h.call(this,a(b.currentTarget),d)}.bind(this));g.call(this,b,e,d)}function f(b,c){var d=this._options.fontData;if(a(b).data(d)===!0)return!0;c||(c=n(b));var e=m(b),f=a('<p class="fi1"/>').text(e[0]),i=a('<p class="fi2"/>').text(e[1]),j=a('<p class="fi3"/>').text(e[2]),k=a('<div class="'+this._options.fontClass+'"/>').append(f,i,j).offset({top:c.offset.top-45,left:c.offset.left+10}).click(function(b){h.call(this,a(b.currentTarget),d)}.bind(this));g.call(this,b,k,d)}function g(b,c,d){a(b).data(d,!0),a(c).data("ref",b),this.$el.append(c)}function h(b,c){a(a(b).data("ref")).data(c,!1),a(b).remove()}function i(){var b=r(this._options.taglist);a(b).off(".prevent").on("click.prevent",function(c){a(c.target).is(b)&&0===a(c.target).closest(this._options.excluded).length&&c.preventDefault()}.bind(this))}function j(){var b=r(this._options.taglist);a(b).off(".prevent")}function k(a){return s.call(this,a.target)?!d.call(this,a.target):!0}function l(b){return a(b.currentTarget).remove(),!1}function m(b){var c=a(b),d=c.css("font-weight"),e=c.css("font-size").replace("px",""),f=c.css("font-family").split(",")[0].replace(/\"|'/g,""),g=f.split(" ")[0].substr(0,1).toUpperCase(),h=f.split(" ")[1]?f.split(" ")[1].substr(0,1).toUpperCase():f.substr(1,1).toLowerCase(),i=g+h;return[i,d,e]}function n(b){var c=o(b),d=a(b);return{width:d.width(),height:d.height()-(c.t+c.b),offset:{left:d.offset().left+parseInt(d.css("padding-left")),top:d.offset().top+parseInt(d.css("padding-top"))+c.t}}}function o(b){var c=a(b),d=!0,e=c.css("font-weight"),f=c.css("font-size").replace("px",""),g=c.css("font-family").split(",")[0].replace(/\"|\'| /g,"").toLowerCase(),h={arial:q(),"open sans":q()};if(h.arial[8]=p(0,0),h.arial[12]=p(3,1),h.arial[18]=p(2,-1),h.arial[20]=p(6,3),h["open sans"][12]=p(1,-1),h["open sans"][21]=p(5,1),h["open sans"][26]=p(11,5),d){var i=[];i.push('family:"'+g+'" - size:'+f+" - weight:"+e),h[g]||i.push("fontFAMILY not used.. we'll implement it soon!"),h[g]&&(!h[g][f]||0===h[g][f].t&&0===h[g][f].b)&&i.push("fontSIZE not used.. we'll implement it soon!"),i.push("-----------------"),console.log(i.join("\n"))}var j;return j=h[g]?h[g]:q(),j=j[f]?j[f]:j[8]}function p(a,b){return{t:a&&0!==a?a:0,b:b&&0!==b?b:0}}function q(){return{8:p(),9:p(),10:p(),11:p(),12:p(),13:p(),14:p(),15:p(),16:p(),17:p(),18:p(),19:p(),20:p(),21:p(),22:p(),23:p(),24:p(),25:p(),26:p(),27:p(),28:p(),29:p()}}function r(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&a[c]&&b.push(c);return b.join(",")}function s(b){var c=a(b);if(""!==this._options.excluded&&c.closest(this._options.excluded).length>0)return!1;var d=""!==c.html()&&""!==c.text()&&" "!==c.text()&&"&nbsp;"!==c.text();if(d){var e,f=this._options.taglist;for(e in f)if(f.hasOwnProperty(e)&&f[e]&&c.is(e))return!0;if(c.is("div")&&0===c.find("*").length)return!0}return!1}return c.prototype=Object.create(b.prototype),c.prototype.initOptions=function(a){this.setOptions({checkUseMarker:null,checkUseFont:null,markerClass:"fiboMarker",fontClass:"fiboFontinfo",markerData:"markerHL",fontData:"markerFI",excluded:"",taglist:{p:!0,span:!0,strong:!0,li:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,a:!0,input:!0,select:!0,textfield:!0,label:!0}},a),this._options.excluded=(""===this._options.excluded?"":this._options.excluded+",")+"."+this._options.fontClass},c.prototype.initStyles=function(a){var b=this._options.markerClass,c=this._options.fontClass;this._selectorsMapping={marker:"."+b,fontinfo:"."+c,fontinfo_p:"."+c+" p",fontinfo_p1:"."+c+" p.fi1",fontinfo_p2:"."+c+" p.fi2",fontinfo_p3:"."+c+" p.fi3"},this.setStyles({main:{position:"absolute"},marker:{position:"absolute !important","z-index":"1",background:"#0ff",opacity:"0.5"},fontinfo:{position:"absolute !important","z-index":"2",background:"rgba(34, 34, 34, 0.7)",border:"1px solid #fff",padding:"3px","font-family":"Open Sans",color:"#fff"},fontinfo_p:{margin:"0",cursor:"default","text-algin":"center"},fontinfo_p1:{"font-size":"13px","font-weight":"700","margin-top":"-4px"},fontinfo_p2:{"font-size":"10px","font-weight":"400",margin:"-5px 0"},fontinfo_p3:{"font-size":"14px","font-weight":"600","margin-bottom":"-4px"}},a)},c.prototype.initEvents=function(){var b=this._options.reference,c="."+this._options.markerClass,d=r(this._options.taglist);a(b).off(".markerevent").on("click.markerevent",k.bind(this)).on("click.markerevent",c,l.bind(this)),a(d).data(this._options.markerData,null),a(d).data(this._options.fontData,null)},c.prototype.toggleListener=function(a){a?i.call(this):j.call(this)},c.prototype.addMarkerToElement=function(a){return d.call(this,a)},c.prototype.markEvent=function(a){return k.call(this,a)},c.prototype.unmarkEvent=function(a){return l.call(this,a)},c}(jQuery,a);return b}();